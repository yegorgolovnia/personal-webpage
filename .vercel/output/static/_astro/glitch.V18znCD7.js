const f="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#$%&0x";function u(){return typeof window>"u"?!1:window.matchMedia("(prefers-reduced-motion: reduce)").matches}class d{el;chars;queue;frame;frameRequest;originalText;constructor(t){this.el=t,this.chars=f,this.queue=[],this.frame=0,this.frameRequest=null,this.el.dataset.originalText?this.originalText=this.el.dataset.originalText:(this.originalText=t.innerText,this.el.dataset.originalText=this.originalText)}setText(t,e="normal"){if(u()){this.el.textContent=t,this.originalText=t,this.el.dataset.originalText=t;return}const a=this.el.innerText,i=Math.max(a.length,t.length);this.queue=[];for(let h=0;h<i;h++){const n=a[h]||"",s=t[h]||"",c=Math.floor(Math.random()*8),o=c+Math.floor(Math.random()*15);this.queue.push({from:n,to:s,start:c,end:o})}this.frameRequest&&cancelAnimationFrame(this.frameRequest),this.frame=0,this.update(e)}update(t){let e="",a=0;for(let i=0,h=this.queue.length;i<h;i++){let{from:n,to:s,start:c,end:o,char:r}=this.queue[i];if(/\s/.test(s)){e+=s,a++;continue}if(this.frame>=o)if(a++,t==="encrypt"){(!r||Math.random()<.1)&&(r=this.chars[Math.floor(Math.random()*this.chars.length)],this.queue[i].char=r);const l=Math.random()>.8?"dud-rgb":"dud-mono";e+=`<span class="${l}">${r}</span>`}else e+=s;else if(this.frame>=c){(!r||Math.random()<.28)&&(r=this.chars[Math.floor(Math.random()*this.chars.length)],this.queue[i].char=r);const l=Math.random()>.8?"dud-rgb":"dud-mono";e+=`<span class="${l}">${r}</span>`}else e+=n}this.el.innerHTML=e,a===this.queue.length||(this.frameRequest=requestAnimationFrame(()=>this.update(t)),this.frame++)}setTextInstant(t){this.frameRequest&&cancelAnimationFrame(this.frameRequest),this.frameRequest=null,this.el.textContent=t,this.originalText=t,this.el.dataset.originalText=t}restore(){this.setText(this.originalText,"normal")}restoreInstant(){this.frameRequest&&cancelAnimationFrame(this.frameRequest),this.frameRequest=null,this.el.textContent=this.originalText,this.el.dataset.originalText=this.originalText}}class g{canvas;ctx;stretchFactor;animRequest;constructor(t){this.canvas=t,this.ctx=t.getContext("2d"),this.stretchFactor=0,this.animRequest=null,this.resize(),window.addEventListener("resize",()=>this.resize())}resize(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight}draw(){if(this.ctx&&(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),!u()))if(this.stretchFactor>.01){const t=Math.floor(110*this.stretchFactor);for(let e=0;e<t;e++){const a=Math.random()*50*this.stretchFactor+2,i=Math.random()*this.canvas.width*.7*this.stretchFactor+24,h=Math.random()*this.canvas.width-i/2,n=Math.random()*this.canvas.height,s=Math.random();s>.95?this.ctx.fillStyle=`rgba(255, 255, 255, ${.35*this.stretchFactor})`:s>.9?this.ctx.fillStyle=`rgba(255, 100, 100, ${.25*this.stretchFactor})`:s>.85?this.ctx.fillStyle=`rgba(100, 255, 100, ${.25*this.stretchFactor})`:s>.8?this.ctx.fillStyle=`rgba(100, 100, 255, ${.25*this.stretchFactor})`:s>.75?this.ctx.fillStyle=`rgba(100, 255, 255, ${.25*this.stretchFactor})`:this.ctx.fillStyle=`rgba(0, 0, 0, ${.6*this.stretchFactor})`,this.ctx.fillRect(h,n,i,a)}this.stretchFactor*=.94,this.animRequest=requestAnimationFrame(()=>this.draw())}else this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}triggerEntrance(){this.stretchFactor=.7,this.animRequest&&cancelAnimationFrame(this.animRequest),this.draw()}triggerExit(){this.stretchFactor=.7,this.animRequest&&cancelAnimationFrame(this.animRequest),this.draw()}setStretch(t){this.stretchFactor=t,this.animRequest&&cancelAnimationFrame(this.animRequest),this.draw()}}export{g as G,d as T};
